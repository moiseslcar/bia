version: 0.2

phases:
  install:
    commands:
      - echo Installing Node 21 e npm...
      - curl -fsSL https://rpm.nodesource.com/setup_21.x | sudo bash -
      - sudo yum install -y nodejs
  build:
    commands:
      - npm install --loglevel=error
      - COPY client/package*.json ./client/
      - cd client && npm install --legacy-peer-deps --loglevel=error
      - cd client && VITE_API_URL=https://cdn-bia.humangovmlc.click npm run build
      - echo Rodando testes unit√°rios
      - npm test